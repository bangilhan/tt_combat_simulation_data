# 플레이어 보고서 구조 정리

## 📋 개요

플레이어 보고서는 **결론 요약 → 근거 요약 → 상세 증거** 구조로 구성됩니다.

### 보고서 주요 니즈
1. 이 유저가 문제가 있는지?
2. 있다면 그 근거는 무엇인지?

---

## 📊 보고서 구조

### 1. 결론 요약 (최상단)

#### 1.1 종합 판단 요약 결과
- **부정행위 의심 정황**: `있음` or `없음`
- **검출 내역 요약** (예시):
  - EAC 패턴 검출 (1건)
  - 사내 에임봇 탐지 패턴 검출 (1건)

> **판단 기준**: 아래 탐지 내역 중 하나라도 탐지될 경우 `있음`으로 처리
> - EAC 패턴 검출
> - NCGuard 검출
> - 사내 에임봇 탐지 모델 검출
> - 룰기반 패턴 검출

---

### 2. 분석 대상 및 사실 요약

#### 2.1 분석 대상 플레이어 정보

| 항목 | 설명 | 데이터 소스 | 현재 상태 |
|------|------|-------------|-----------|
| 계정 ID | 플레이어 계정 ID | `player_id` | ✅ 있음 |
| 유저명 | 플레이어 이름 | `player_name` | ✅ 있음 |
| 입력 장치 | 키/마, 콘솔 | `input_device` | ✅ 있음 (조인 가능) |
| 여행자 정보 | 캐릭터 정보 (1~15) | `character` | ❌ 없음 (Mock 필요) |
| OS 정보 | Unknown, Windows, MacOS, Linux, PS5, XSX | `os` | ❌ 없음 (Mock 필요) |
| 무기 정보 | 장착 무기 | `equipped_weapon_id` | ✅ 있음 |
| 앱(아이템) 구매 내역 | 아이템 구매 정보 | - | ❌ 없음 (Mock 필요) |
| 스킬 강화 정보 (3개 항목) | 스킬 강화 데이터 | - | ❌ 없음 (Mock 필요) |

**여행자 정보 매핑**:
- 1:캐시, 2:버티, 3:레이븐, 4:커티스, 5:에두, 6:조란, 7:로쿠로, 8:안드레이, 9:아서, 10:유나, 11:미사용, 12:에포크, 13:앨리스, 14:자자, 15:럼&레이진

#### 2.2 매치 참여 정보

| 항목 | 설명 | 데이터 소스 | 현재 상태 |
|------|------|-------------|-----------|
| 매치 ID | 매치 고유 ID | `match_id` | ✅ 있음 |
| 게임 타입 | AI매치, 일반 매치, 이벤트 매치, 커스텀 매치 | - | ❌ 없음 (Mock 필요) |
| 팀 타입 | 솔로, 듀오, 트리오, 스쿼드 | `team` (CT/TERRORIST만 있음) | ⚠️ 부분적 (Mock 필요) |
| 맵 | 요코가와, 모르슈타드 공국, 베르니니움, 미래시, 이슬라 벨로스 | `map` (조인 가능) | ✅ 있음 |
| 게임 시작/종료 시간 | 매치 시작/종료 시각 | `time_range.min/max` | ✅ 있음 |

#### 2.3 교전 정보

| 항목 | 설명 | 데이터 소스 | 현재 상태 |
|------|------|-------------|-----------|
| 해당 매치 내 순위 | 최종 순위 | - | ❌ 없음 (Mock 필요) |
| 생존시간(초) | 총 생존 시간 | `time_range` 기반 계산 가능 | ⚠️ 계산 가능 |
| K/D/A 현황 | 킬/데스/어시스트 | `playerStats` | ✅ 있음 |
| 데미지 | 총 데미지 | - | ❌ 없음 (Mock 필요) |
| 명중률 | 명중률 통계 | - | ❌ 없음 (Mock 필요) |
| 킬 이벤트 상세 | 시간, 공격자, 피해자, 사용무기, 헤드샷 여부 | `events` | ✅ 있음 |

---

### 3. 상세 증거

#### 3.1 EAC 탐지 내역

| 항목 | 설명 | 데이터 소스 | 현재 상태 |
|------|------|-------------|-----------|
| EAC 탐지 내역 | 있음 or 없음 | - | ❌ 없음 (Mock 필요) |
| 상세 정보 | 탐지 정보 및 사유 | - | ❌ 없음 (Mock 필요) |

**EAC 탐지 패턴 리스트**:
- ✅ Aimbot LSTM (에임봇) - 있음/없음
- ✅ high_crit_rate (짧은 시간 내 비정상적 높은 치명타) - 있음/없음
- ✅ high_hit_rate (짧은 시간 안에 비정상적 높은 명중률) - 있음/없음
- ✅ massive_reports (많은 수의 신고 접수) - 있음/없음
- ✅ recursive_massive_reports (반복적인 massive_reports 탐지) - 있음/없음
- ✅ 동일 기기 다계정 유저 여부 - 있음/없음
- ✅ 하드웨어 밴 - 있음/없음
- ✅ DMA (Direct Memory Access) 치트 방어 - 있음/없음

> 현재 보고서에 일부 Mock 데이터로 표시 중 (high_crit_rate, high_hit_rate, massive_reports 등)

#### 3.2 NCGuard 탐지 내역

| 항목 | 설명 | 데이터 소스 | 현재 상태 |
|------|------|-------------|-----------|
| NCGuard 탐지 내역 | 있음 or 없음 | - | ❌ 없음 (Mock 필요) |
| 상세 정보 | 탐지 정보 및 사유 | - | ❌ 없음 (Mock 필요) |

#### 3.3 사내 에임봇 탐지 내역

| 항목 | 설명 | 데이터 소스 | 현재 상태 |
|------|------|-------------|-----------|
| 사내 에임봇 탐지 내역 | 있음 or 없음 | - | ❌ 없음 (Mock 필요) |
| 상세 정보 | 해당 파트의 내역이 있을때만 킬별 에임 궤적 분석 시각화 제공 | `generateReport`의 Aim Trace | ✅ 있음 (부분적) |
| 이상 조준 구간 시각화 | 에임 궤적 시각화 | `killTraceImages` | ✅ 있음 |

> 현재 `generateReport` 함수에서 킬별 에임 궤적 분석 시각화 제공 중 (±30틱 범위)

#### 3.4 룰기반 탐지 패턴 내역

| 항목 | 설명 | 데이터 소스 | 현재 상태 |
|------|------|-------------|-----------|
| 룰기반 탐지 내역 | 있음 or 없음 | - | ❌ 없음 (Mock 필요) |
| 상세 정보 | 탐지 정보 및 사유 | - | ❌ 없음 (Mock 필요) |

**룰기반 탐지 패턴 리스트** (예정):
- 리스폰 핵 [캐릭터(사망 시 부활까지의 시간)/앱/몬스터 리스폰 시간 조작]
- 타임에너지 핵 [제한 범위를 초과하여 흡수(2M) or 제한 개수 이상 흡수(최대 3개)]
- 쿨타임 무시 핵 [스킬의 재사용 대기시간을 무시하고 사용 가능]
- 사거리 핵 [공격 가능 범위를 벗어난 곳에 공격이 가능하도록 조작]
- 이동 핵 [이동 불가 지역에서 이동할 수 있도록 조작 (지형 무시 이동)]
- 설치 핵 [설치가 불가능한 지역에 구조물 설치]

#### 3.5 유저 신고 내역

| 항목 | 설명 | 데이터 소스 | 현재 상태 |
|------|------|-------------|-----------|
| 유저 신고 내역 | 있음 or 없음 | - | ❌ 없음 (Mock 필요) |
| 상세 정보 | 누가, 어떤 사유로 | - | ❌ 없음 (Mock 필요) |

**신고 사유**:
1. 자리비움/탈주
2. 부적절한 닉네임
3. 악의적인 플레이
4. 불법 프로그램 사용
5. 기타

---

## 📝 현재 구현 상태 요약

### ✅ 구현 완료 항목
1. 기본 플레이어 정보 (계정 ID, 유저명, 입력 장치, OS, 캐릭터, 무기)
2. 매치 정보 (매치 ID, 맵, 게임 시간 범위)
3. 교전 정보 (K/D/A, 킬 이벤트 상세)
4. 사내 에임봇 탐지 시각화 (킬별 에임 궤적 분석)

### ⚠️ 부분 구현 항목
1. 생존시간 (계산 가능하나 명시적 표시 없음)
2. 팀 타입 (CT/TERRORIST만 있음, 솔로/듀오/트리오/스쿼드 정보 없음)

### ❌ 미구현 항목 (Mock 데이터 필요)
1. **플레이어 정보**:
   - 앱(아이템) 구매 내역
   - 스킬 강화 정보 (3개 항목)

2. **매치 정보**:
   - 게임 타입 (AI매치, 일반 매치, 이벤트 매치, 커스텀 매치)
   - 팀 타입 (솔로, 듀오, 트리오, 스쿼드)

3. **교전 정보**:
   - 해당 매치 내 순위
   - 데미지
   - 명중률

4. **탐지 내역**:
   - EAC 탐지 내역 (상세 정보)
   - NCGuard 탐지 내역
   - 룰기반 탐지 패턴 내역
   - 유저 신고 내역

5. **결론 요약**:
   - 종합 판단 요약 결과 (부정행위 의심 정황)
   - 검출 내역 요약

---

## 🔄 다음 단계

1. **Mock 데이터 구조 정의**: 각 미구현 항목에 대한 Mock 데이터 구조 정의
2. **보고서 구조 재구성**: 결론 요약 → 근거 요약 → 상세 증거 순서로 재구성
3. **데이터 통합**: 기존 데이터와 Mock 데이터 통합
4. **UI 개선**: 새로운 구조에 맞는 보고서 UI 구현
